# 컬처맵(CultureMap) 프로젝트 구조 문서

## 📁 프로젝트 전체 구조

```
culturemap/
├── src/main/java/com/culturemap/
│   ├── config/              # 설정 클래스
│   ├── controller/          # REST API 컨트롤러
│   ├── domain/              # JPA 엔티티 (도메인 모델)
│   ├── dto/                 # 데이터 전송 객체
│   ├── exception/           # 예외 처리
│   ├── repository/          # JPA 리포지토리
│   ├── security/            # 보안 관련 클래스
│   └── service/             # 비즈니스 로직
├── src/main/resources/
│   └── application.properties  # 애플리케이션 설정
└── frontend/                # React + TypeScript 프론트엔드
    ├── src/
    │   ├── components/      # React 컴포넌트
    │   ├── pages/           # 페이지 컴포넌트
    │   ├── services/        # API 서비스
    │   ├── hooks/           # 커스텀 훅
    │   ├── types/           # TypeScript 타입 정의
    │   └── utils/           # 유틸리티 함수
    └── public/              # 정적 파일
```

---

## 📦 패키지별 상세 설명

### 1. `config` 패키지 - 설정 클래스

Spring Boot 애플리케이션의 전역 설정을 담당하는 클래스들입니다.

#### `SecurityConfig.java`
- **역할**: Spring Security 설정
- **주요 기능**:
  - JWT 기반 인증 필터 설정
  - CORS 설정 (프론트엔드와의 통신 허용)
  - 인증이 필요한 경로와 공개 경로 설정
  - 비밀번호 인코더 빈 등록 (BCrypt)
- **설정 경로**:
  - 공개: `/api/auth/**`, `/h2-console/**`, `/swagger-ui/**`, `/api-docs/**`, `/api/places/kakao/**`
  - 인증 필요: 그 외 모든 경로

#### `SwaggerConfig.java`
- **역할**: Swagger/OpenAPI 문서화 설정
- **주요 기능**:
  - API 문서 자동 생성 설정
  - API 제목, 설명, 버전 정보 설정
- **접근**: `http://localhost:8080/swagger-ui.html`

#### `RestTemplateConfig.java`
- **역할**: RestTemplate 빈 등록
- **주요 기능**:
  - 외부 API 호출을 위한 RestTemplate 빈 생성
  - Kakao API, 한국문화정보원 API 호출 시 사용

---

### 2. `controller` 패키지 - REST API 컨트롤러

클라이언트의 HTTP 요청을 받아 처리하고 응답을 반환하는 REST API 엔드포인트입니다.

#### `AuthController.java`
- **역할**: 인증 관련 API
- **엔드포인트**:
  - `POST /api/auth/signup`: 회원가입
  - `POST /api/auth/login`: 로그인
- **사용 DTO**: `SignupRequest`, `AuthRequest`, `AuthResponse`

#### `PlanController.java`
- **역할**: 플랜(여행 계획) 관리 API
- **엔드포인트**:
  - `POST /api/plans`: 플랜 생성
  - `GET /api/plans`: 내 플랜 목록 조회 (날짜 필터링 가능)
  - `GET /api/plans/{id}`: 플랜 상세 조회
  - `PUT /api/plans/{id}`: 플랜 수정
  - `DELETE /api/plans/{id}`: 플랜 삭제
  - `POST /api/plans/add-place`: 플랜에 장소 추가
- **인증**: 모든 엔드포인트 인증 필요
- **사용 DTO**: `PlanRequest`, `PlanResponse`, `AddPlaceToPlanRequest`

#### `PlaceController.java`
- **역할**: 장소(문화시설) 관리 API
- **엔드포인트**:
  - `GET /api/places`: 장소 검색 (키워드 필터링 가능)
  - `GET /api/places/{id}`: 장소 상세 조회
  - `POST /api/places`: 장소 생성 (Kakao API에서 가져온 장소 저장)
  - `GET /api/places/kakao/nearby`: Kakao Local API를 통한 주변 문화시설 검색 (프록시)
- **인증**: `/kakao/nearby`는 공개, 나머지는 인증 필요
- **사용 DTO**: `PlaceRequest`, `PlaceResponse`

#### `PlanPostController.java`
- **역할**: 공유 게시글 관리 API
- **엔드포인트**:
  - `POST /api/posts`: 게시글 생성 (플랜 공유)
  - `GET /api/posts`: 전체 게시글 목록 조회 (공개)
  - `GET /api/posts/{id}`: 게시글 상세 조회 (공개)
  - `PUT /api/posts/{id}`: 게시글 수정
  - `DELETE /api/posts/{id}`: 게시글 삭제
- **인증**: 조회는 공개, 생성/수정/삭제는 인증 필요
- **사용 DTO**: `PlanPostRequest`, `PlanPostResponse`

---

### 3. `domain` 패키지 - JPA 엔티티

데이터베이스 테이블과 매핑되는 도메인 모델입니다.

#### `Member.java`
- **역할**: 회원 정보 엔티티
- **테이블**: `members`
- **주요 필드**:
  - `id`: 회원 ID (PK)
  - `email`: 이메일 (유니크, 로그인 ID로 사용)
  - `password`: 비밀번호 (BCrypt 암호화)
  - `nickname`: 닉네임
  - `createdAt`: 가입일시
- **관계**: `Plan`과 일대다 관계

#### `Place.java`
- **역할**: 문화시설(장소) 정보 엔티티
- **테이블**: `places`
- **주요 필드**:
  - `id`: 장소 ID (PK)
  - `name`: 장소명
  - `address`: 주소
  - `category`: 카테고리
  - `latitude`: 위도
  - `longitude`: 경도
  - `description`: 설명
  - `externalId`: 외부 API에서 가져온 ID (중복 방지용)
- **관계**: `PlanPlace`와 일대다 관계

#### `Plan.java`
- **역할**: 사용자의 문화 생활 플랜 엔티티
- **테이블**: `plans`
- **주요 필드**:
  - `id`: 플랜 ID (PK)
  - `member`: 회원 (다대일 관계)
  - `planDate`: 플랜 날짜
  - `title`: 플랜 제목
  - `planPlaces`: 플랜에 포함된 장소 목록 (일대다)
  - `createdAt`: 생성일시
  - `updatedAt`: 수정일시
- **관계**: 
  - `Member`와 다대일 관계
  - `PlanPlace`와 일대다 관계
  - `PlanPost`와 일대일 관계

#### `PlanPlace.java`
- **역할**: 플랜과 장소의 연결 테이블 (중간 엔티티)
- **테이블**: `plan_places`
- **주요 필드**:
  - `id`: ID (PK)
  - `plan`: 플랜 (다대일 관계)
  - `place`: 장소 (다대일 관계)
  - `visitOrder`: 방문 순서
  - `visitTime`: 방문 시간
- **역할**: 하나의 플랜에 여러 장소를 순서대로 추가할 수 있도록 연결

#### `PlanPost.java`
- **역할**: 공유 게시글 엔티티
- **테이블**: `plan_posts`
- **주요 필드**:
  - `id`: 게시글 ID (PK)
  - `plan`: 참조하는 플랜 (다대일 관계)
  - `title`: 게시글 제목
  - `description`: 게시글 설명
  - `createdAt`: 작성일시
- **역할**: 사용자가 만든 플랜을 공유 게시판에 공유할 때 사용

---

### 4. `dto` 패키지 - 데이터 전송 객체

클라이언트와 서버 간 데이터 전송에 사용되는 객체입니다. 엔티티를 직접 노출하지 않고 DTO를 통해 필요한 데이터만 전송합니다.

#### `SignupRequest.java`
- **역할**: 회원가입 요청 DTO
- **사용 위치**: `AuthController.signup()`
- **필드**:
  - `email`: 이메일 (필수, 이메일 형식 검증)
  - `password`: 비밀번호 (필수, 최소 6자)
  - `nickname`: 닉네임 (필수, 2~20자)
- **검증**: Jakarta Validation 사용 (`@NotBlank`, `@Email`, `@Size`)

#### `AuthRequest.java`
- **역할**: 로그인 요청 DTO
- **사용 위치**: `AuthController.login()`
- **필드**:
  - `email`: 이메일 (필수, 이메일 형식 검증)
  - `password`: 비밀번호 (필수)

#### `AuthResponse.java`
- **역할**: 인증 응답 DTO (회원가입/로그인 공통)
- **사용 위치**: `AuthController`, `MemberService`
- **필드**:
  - `token`: JWT 토큰
  - `email`: 사용자 이메일
  - `nickname`: 사용자 닉네임

#### `PlanRequest.java`
- **역할**: 플랜 생성/수정 요청 DTO
- **사용 위치**: `PlanController`
- **필드**: 플랜 생성 시 필요한 정보 (날짜, 제목, 장소 목록 등)

#### `PlanResponse.java`
- **역할**: 플랜 응답 DTO
- **사용 위치**: `PlanController`, `PlanService`
- **필드**: 플랜 정보 및 포함된 장소 목록

#### `AddPlaceToPlanRequest.java`
- **역할**: 플랜에 장소 추가 요청 DTO
- **사용 위치**: `PlanController.addPlaceToPlan()`
- **필드**: 플랜 ID, 장소 ID, 방문 순서 등

#### `PlaceRequest.java`
- **역할**: 장소 생성 요청 DTO
- **사용 위치**: `PlaceController.createPlace()`
- **필드**: 장소 정보 (이름, 주소, 좌표, 카테고리 등)

#### `PlaceResponse.java`
- **역할**: 장소 응답 DTO
- **사용 위치**: `PlaceController`
- **필드**: 장소 정보

#### `PlanPostRequest.java`
- **역할**: 게시글 생성/수정 요청 DTO
- **사용 위치**: `PlanPostController`
- **필드**: 플랜 ID, 제목, 설명

#### `PlanPostResponse.java`
- **역할**: 게시글 응답 DTO
- **사용 위치**: `PlanPostController`, `PlanPostService`
- **필드**: 게시글 정보 및 참조하는 플랜 정보

---

### 5. `exception` 패키지 - 예외 처리

전역 예외 처리를 담당하는 클래스입니다.

#### `GlobalExceptionHandler.java`
- **역할**: 전역 예외 처리 핸들러
- **처리 예외**:
  - `IllegalArgumentException`: 잘못된 인자 예외 (400 Bad Request)
  - `MethodArgumentNotValidException`: DTO 검증 실패 (400 Bad Request)
  - `RuntimeException`: 런타임 예외 (500 Internal Server Error)
    - Kakao API 관련 예외는 특별 처리 (IP 화이트리스트: 403, 인증 실패: 401)
  - `Exception`: 기타 모든 예외 (500 Internal Server Error)
- **응답 형식**: JSON 형태의 에러 메시지

---

### 6. `repository` 패키지 - JPA 리포지토리

데이터베이스 접근을 담당하는 인터페이스입니다. Spring Data JPA를 사용하여 기본 CRUD 메서드를 자동 제공합니다.

#### `MemberRepository.java`
- **역할**: 회원 데이터 접근
- **주요 메서드**:
  - `findByEmail(String email)`: 이메일로 회원 조회
  - `existsByEmail(String email)`: 이메일 중복 확인

#### `PlanRepository.java`
- **역할**: 플랜 데이터 접근
- **주요 메서드**: 기본 CRUD + 커스텀 쿼리 (날짜별 조회 등)

#### `PlaceRepository.java`
- **역할**: 장소 데이터 접근
- **주요 메서드**:
  - `findByExternalId(String externalId)`: 외부 API ID로 장소 조회 (중복 방지)

#### `PlanPostRepository.java`
- **역할**: 게시글 데이터 접근
- **주요 메서드**: 기본 CRUD

---

### 7. `security` 패키지 - 보안 관련 클래스

JWT 인증 및 Spring Security 관련 클래스입니다.

#### `JwtUtil.java`
- **역할**: JWT 토큰 생성 및 검증 유틸리티
- **주요 메서드**:
  - `generateToken(String email)`: JWT 토큰 생성
  - `getEmailFromToken(String token)`: 토큰에서 이메일 추출
  - `validateToken(String token)`: 토큰 유효성 검증
- **설정**: `application.properties`의 `jwt.secret`, `jwt.expiration` 사용

#### `JwtAuthenticationFilter.java`
- **역할**: JWT 인증 필터
- **주요 기능**:
  - HTTP 요청의 `Authorization` 헤더에서 JWT 토큰 추출
  - 토큰 검증 및 사용자 인증 정보 설정
  - Spring Security 필터 체인에 등록되어 모든 요청에 적용
- **동작**: `UsernamePasswordAuthenticationFilter` 앞에서 실행

#### `CustomUserDetailsService.java`
- **역할**: Spring Security의 UserDetailsService 구현
- **주요 기능**:
  - 이메일을 기반으로 회원 정보 조회
  - Spring Security 인증에 필요한 UserDetails 객체 반환
- **사용 위치**: `JwtAuthenticationFilter`에서 사용자 정보 로드 시 사용

---

### 8. `service` 패키지 - 비즈니스 로직

비즈니스 로직을 처리하는 서비스 클래스입니다.

#### `MemberService.java`
- **역할**: 회원 관련 비즈니스 로직
- **주요 메서드**:
  - `signup(SignupRequest)`: 회원가입 처리
    - 이메일 중복 확인
    - 비밀번호 BCrypt 암호화
    - JWT 토큰 생성 및 반환
  - `login(AuthRequest)`: 로그인 처리
    - 이메일/비밀번호 검증
    - JWT 토큰 생성 및 반환
- **의존성**: `MemberRepository`, `PasswordEncoder`, `JwtUtil`

#### `PlanService.java`
- **역할**: 플랜 관련 비즈니스 로직
- **주요 메서드**:
  - `createPlan()`: 플랜 생성
  - `getMyPlans()`: 내 플랜 목록 조회
  - `getMyPlansByDate()`: 날짜별 플랜 조회
  - `getPlan()`: 플랜 상세 조회
  - `updatePlan()`: 플랜 수정
  - `deletePlan()`: 플랜 삭제
  - `addPlaceToPlan()`: 플랜에 장소 추가
- **권한 검증**: 본인이 생성한 플랜만 수정/삭제 가능

#### `PlanPostService.java`
- **역할**: 게시글 관련 비즈니스 로직
- **주요 메서드**:
  - `createPost()`: 게시글 생성 (플랜 공유)
  - `getAllPosts()`: 전체 게시글 조회 (공개)
  - `getPost()`: 게시글 상세 조회
  - `updatePost()`: 게시글 수정
  - `deletePost()`: 게시글 삭제
- **권한 검증**: 본인이 작성한 게시글만 수정/삭제 가능

#### `ExternalApiService.java`
- **역할**: 외부 API 연동 서비스
- **주요 메서드**:
  - `searchNearbyCulturePlaces()`: Kakao Local API를 통한 주변 문화시설 검색
    - 여러 페이지 결과를 합쳐서 반환
    - IP 화이트리스트 오류 등 예외 처리
  - `syncPlacesFromExternalApi()`: 한국문화정보원 API 연동 (향후 구현)
  - `addPlace()`: 수동 장소 추가 (테스트용)
- **설정**: `application.properties`의 `kakao.rest-api-key` 사용

---

## 🔄 데이터 흐름 예시

### 회원가입 플로우
```
1. 클라이언트 → POST /api/auth/signup
   └─ SignupRequest (email, password, nickname)
   
2. AuthController.signup()
   └─ MemberService.signup()
      ├─ MemberRepository.existsByEmail() (중복 확인)
      ├─ PasswordEncoder.encode() (비밀번호 암호화)
      ├─ MemberRepository.save() (회원 저장)
      └─ JwtUtil.generateToken() (JWT 토큰 생성)
   
3. AuthResponse 반환 (token, email, nickname)
```

### 플랜 생성 플로우 (단계별)
```
1. 프론트엔드: 날짜 선택 (PlanForm.tsx - Step 1)
   └─ Calendar 컴포넌트에서 날짜 선택
   
2. 프론트엔드: 플랜 이름 설정 (PlanForm.tsx - Step 2)
   └─ 플랜 이름 입력 (데이트, 가족여행, 친구모임 등 제안)
   
3. 클라이언트 → POST /api/plans
   └─ Authorization: Bearer {JWT_TOKEN}
   └─ PlanRequest (planDate, title, placeIds: [])  // 빈 플랜 생성 가능
   
4. JwtAuthenticationFilter
   └─ JWT 토큰 검증 및 인증 정보 설정
   
5. PlanController.createPlan()
   └─ PlanService.createPlan()
      ├─ Authentication에서 이메일 추출
      ├─ MemberRepository.findByEmail() (회원 조회)
      ├─ Plan 엔티티 생성 (장소 없이도 생성 가능)
      └─ PlanRepository.save()
   
6. PlanResponse 반환
   └─ 프론트엔드: 플랜 상세 페이지로 이동 또는 장소 추가 단계로 진행
```

### 지도에서 장소 추가 플로우
```
1. 프론트엔드: 지도에서 장소 선택 (HomeMap.tsx)
   └─ Kakao Local API로 주변 문화시설 검색
   └─ 마커 클릭 시 모달 열기
   
2. 프론트엔드: 날짜 선택 (모달 Step 1)
   └─ 방문 날짜 선택
   
3. 프론트엔드: 해당 날짜의 플랜 조회
   └─ GET /api/plans?date={selectedDate}
   
4. 플랜 존재 여부에 따른 분기:
   
   [케이스 1] 플랜이 없을 경우:
   - "플랜이 없습니다. 새로 만들겠습니까?" 확인
   - 플랜 이름 설정 (모달 Step 3)
   - POST /api/plans (플랜 생성)
   - POST /api/places (장소 저장)
   - PUT /api/plans/{id} (플랜에 장소 추가)
   
   [케이스 2] 플랜이 1개일 경우:
   - 자동 선택 후 시간 선택 단계로 (모달 Step 4)
   - POST /api/places (장소 저장)
   - PUT /api/plans/{id} (플랜에 장소 추가)
   
   [케이스 3] 플랜이 여러 개일 경우:
   - 플랜 선택 화면 표시 (모달 Step 2)
   - 선택 후 시간 선택 단계로 (모달 Step 4)
   - POST /api/places (장소 저장)
   - PUT /api/plans/{id} (플랜에 장소 추가)
   
5. 완료: 플랜에 장소 추가 완료
```

### 주변 문화시설 검색 플로우
```
1. 클라이언트 → GET /api/places/kakao/nearby?lng=127.0&lat=37.5&radius=2000
   
2. PlaceController.searchNearbyCulturePlaces()
   └─ ExternalApiService.searchNearbyCulturePlaces()
      ├─ RestTemplate으로 Kakao Local API 호출
      ├─ 여러 페이지 결과 수집
      └─ JSON 응답 반환
   
3. Kakao API JSON 응답 반환 (프록시)
```

---

## 🔐 보안 구조

### 인증 방식
- **JWT (JSON Web Token)** 기반 Stateless 인증
- 토큰은 `Authorization: Bearer {token}` 헤더로 전송
- 토큰 만료 시간: 24시간 (86400000ms)

### 인증 필터 체인
```
1. JwtAuthenticationFilter
   └─ JWT 토큰 추출 및 검증
   └─ SecurityContext에 인증 정보 설정
   
2. SecurityFilterChain
   └─ 경로별 권한 확인
   └─ 인증 필요 시 Authentication 객체 확인
```

### 비밀번호 암호화
- **BCrypt** 알고리즘 사용
- `SecurityConfig`에서 `PasswordEncoder` 빈 등록

---

## 📝 주요 설계 패턴

### 1. **계층형 아키텍처 (Layered Architecture)**
- Controller → Service → Repository 계층 분리
- 각 계층의 책임 명확히 분리

### 2. **DTO 패턴**
- 엔티티를 직접 노출하지 않고 DTO 사용
- Request/Response DTO 분리

### 3. **Repository 패턴**
- Spring Data JPA 사용
- 데이터 접근 로직 캡슐화

### 4. **전역 예외 처리**
- `@RestControllerAdvice`를 통한 중앙화된 예외 처리

### 5. **JWT 기반 인증**
- Stateless 인증 방식
- 세션 없이 토큰만으로 인증

---

## 🗄️ 데이터베이스 관계도

```
Member (1) ────< (N) Plan
                        │
                        │ (1)
                        │
                        └───< (N) PlanPlace (N) >─── (1) Place

Plan (1) ────< (N) PlanPost
```

- **Member ↔ Plan**: 일대다 (한 회원이 여러 플랜 생성)
- **Plan ↔ PlanPlace**: 일대다 (한 플랜에 여러 장소 포함)
- **Place ↔ PlanPlace**: 일대다 (한 장소가 여러 플랜에 포함 가능)
- **Plan ↔ PlanPost**: 일대일 (한 플랜은 하나의 게시글로만 공유)

---

## 🌐 프론트엔드 구조

### 기술 스택
- **프레임워크**: React 19.2.0 + TypeScript 5.9.3
- **빌드 도구**: Vite 7.2.4
- **스타일링**: Tailwind CSS 3.4.0
- **라우팅**: React Router DOM 6.26.0
- **HTTP 클라이언트**: Axios 1.7.7
- **지도**: react-kakao-maps-sdk 1.1.7
- **달력**: Litepicker 2.0.12

### 디렉토리 구조

#### `src/components/` - 재사용 가능한 컴포넌트
- **`layout/`**: 레이아웃 컴포넌트
  - `Header.tsx`: 상단 네비게이션 헤더 (초록색 테마)
  - `Layout.tsx`: 전체 레이아웃 래퍼
- **`ui/`**: UI 기본 컴포넌트
  - `Button.tsx`: 버튼 컴포넌트 (primary, secondary, success, danger, warning)
  - `Card.tsx`: 카드 컴포넌트
  - `Input.tsx`: 입력 필드 컴포넌트
  - `Textarea.tsx`: 텍스트 영역 컴포넌트
- **`Calendar.tsx`**: 달력 컴포넌트 (날짜 선택 및 플랜 표시)
- **`HomeMap.tsx`**: 메인 화면 지도 컴포넌트 (주변 문화시설 검색 및 플랜 추가)
- **`KakaoMap.tsx`**: Kakao 지도 컴포넌트 (플랜 상세 페이지용)
- **`ProtectedRoute.tsx`**: 인증이 필요한 라우트 보호 컴포넌트

#### `src/pages/` - 페이지 컴포넌트
- **`Home.tsx`**: 메인 화면 (히어로 섹션, 기능 소개, 지도)
- **`Login.tsx`**: 로그인 페이지
- **`Signup.tsx`**: 회원가입 페이지
- **`Plans.tsx`**: 내 플랜 목록 페이지 (달력 필터링)
- **`PlanForm.tsx`**: 플랜 생성/수정 페이지 (단계별 플로우)
- **`PlanDetail.tsx`**: 플랜 상세 페이지 (타임라인, 지도, 공유 기능)
- **`Posts.tsx`**: 공유 게시판 목록 페이지
- **`PostDetail.tsx`**: 게시글 상세 페이지

#### `src/services/` - API 서비스
- **`authService.ts`**: 인증 관련 API (로그인, 회원가입, 토큰 관리)
- **`planService.ts`**: 플랜 관련 API (CRUD, 장소 추가)
- **`placeService.ts`**: 장소 관련 API (검색, 생성)
- **`postService.ts`**: 게시글 관련 API (CRUD)
- **`kakaoLocalService.ts`**: Kakao Local API 연동 (주변 문화시설 검색)

#### `src/hooks/` - 커스텀 훅
- **`useGeolocation.ts`**: 사용자 위치 정보 가져오기 (HTML5 Geolocation API)

#### `src/types/` - TypeScript 타입 정의
- **`index.ts`**: 모든 타입 정의 (Plan, Place, AuthResponse 등)

#### `src/utils/` - 유틸리티
- **`api.ts`**: Axios 인스턴스 설정 (JWT 토큰 자동 추가, 인터셉터)

### 라우팅 구조
```
/                    → Home (공개)
/login               → Login (공개)
/signup              → Signup (공개)
/plans               → Plans (인증 필요)
/plans/new           → PlanForm (인증 필요, 새 플랜 생성)
/plans/:id           → PlanDetail (인증 필요)
/plans/:id/edit      → PlanForm (인증 필요, 플랜 수정)
/posts               → Posts (공개)
/posts/:id           → PostDetail (공개)
```

### 주요 기능

#### 1. 플랜 생성 플로우 (단계별)
1. **날짜 선택**: 달력에서 방문 날짜 선택
2. **플랜 이름 설정**: 플랜 이름 입력 (데이트, 가족여행, 친구모임 등 제안)
3. **플랜 생성**: 빈 플랜 생성 (장소는 나중에 추가 가능)
4. **장소 추가**: 플랜에 장소 추가 (검색 또는 지도에서)

#### 2. 지도에서 장소 추가 플로우
1. **장소 선택**: 지도에서 문화시설 마커 클릭
2. **날짜 선택**: 방문 날짜 선택
3. **플랜 확인**: 해당 날짜의 플랜 조회
   - 플랜이 없으면 → "새로 만들겠습니까?" 확인 → 플랜 이름 설정
   - 플랜이 1개면 → 자동 선택
   - 플랜이 여러 개면 → 플랜 선택
4. **시간 선택**: 방문 시간 선택 (선택사항)
5. **장소 추가**: 선택한 플랜에 장소 추가

#### 3. UI/UX 특징
- **초록색 테마**: 전체 UI가 초록색 계열로 통일
- **그라데이션 배경**: 메인 화면 히어로 섹션에 그라데이션 적용
- **애니메이션**: 페이드인, 호버 효과 등 부드러운 전환
- **반응형 디자인**: 모바일/태블릿/데스크톱 대응
- **현실적인 거리/시간 계산**: 
  - 도보: 시속 4km (최소 3분)
  - 자동차: 시속 30km (2km 이하 최소 5분, 5km 이하 최소 8분)

---

## 📚 참고 사항

### 설정 파일
- `application.properties`: 모든 애플리케이션 설정
  - 데이터베이스 설정 (H2 인메모리, MySQL 지원)
  - JWT 설정 (만료 시간 24시간)
  - CORS 설정 (`http://localhost:3000`, `http://localhost:5173`)
  - Swagger 설정
  - Kakao API 키

### 프론트엔드 연동
- CORS 설정: `http://localhost:3000`, `http://localhost:5173` 허용
- JWT 토큰은 `Authorization: Bearer {token}` 헤더로 전송
- API 응답은 JSON 형식
- Axios 인터셉터를 통한 자동 토큰 추가 및 에러 처리

### 외부 API 연동
- **Kakao Local API**: 주변 문화시설 검색 (백엔드 프록시)
- **Kakao Maps SDK**: 지도 표시 및 마커 (프론트엔드 직접 호출)
- **HTML5 Geolocation API**: 사용자 현재 위치 (프론트엔드)
- **한국문화정보원 API**: 문화시설 정보 (향후 구현)

### 최근 주요 변경사항
- ✅ 플랜 생성과 장소 추가 기능 분리 (단계별 플로우)
- ✅ UI/UX 개선 (초록색 테마, 그라데이션, 애니메이션)
- ✅ 거리/시간 계산 로직 개선 (더 현실적인 소요 시간)
- ✅ 메인 화면 히어로 섹션 크기 조정
- ✅ 플랜 이름 제안 기능 추가

---

> **작성일**: 2024년  
> **프로젝트 버전**: v1.0  
> **Spring Boot 버전**: 4.0.0  
> **Java 버전**: 17  
> **React 버전**: 19.2.0  
> **TypeScript 버전**: 5.9.3

